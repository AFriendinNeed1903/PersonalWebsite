<!DOCTYPE html>
<html>
<head>
  <title>ChurnBuddy Test</title>
  <style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }

    h1, h2, h3 {
        color: #333;
    }

    label {
        display: inline-block;
        width: 200px;
        margin-bottom: 5px;
    }

    input {
        margin-bottom: 5px;
    }

    button {
        margin-top: 10px;
    }

    form {
        margin-bottom: 20px;
    }

    #card-list, #sorted-card-list {
        list-style-type: none;
        padding: 0;
    }

    #card-list li, #sorted-card-list li {
        background-color: #f9f9f9;
        margin-bottom: 5px;
        padding: 5px;
        border: 1px solid #ddd;
    }
  </style>
</head>
<body>

  <h1>Credit Card Profitability Calculator</h1>

  <h2>Enter Your Monthly Spending</h2>
  <form id="spending-form">
    <label for="dining-spending">Dining Spending: </label>
    <input type="number" id="dining-spending" min="0" step="0.01"><br>

    <label for="grocery-spending">Grocery Spending: </label>
    <input type="number" id="grocery-spending" min="0" step="0.01"><br>

    <label for="transportation-spending">Transportation Spending: </label>
    <input type="number" id="transportation-spending" min="0" step="0.01"><br>

    <label for="misc-spending">Miscellaneous Spending: </label>
    <input type="number" id="misc-spending" min="0" step="0.01"><br>
  </form>

  <h2>Add Credit Cards</h2>
  <form id="card-form">
    <label for="card-name">Card Name: </label>
    <input type="text" id="card-name"><br>

    <label for="rewards-dining">Rewards Rate for Dining (%): </label>
    <input type="number" id="rewards-dining" min="0" step="0.01"><br>

    <label for="rewards-grocery">Rewards Rate for Groceries (%): </label>
    <input type="number" id="rewards-grocery" min="0" step="0.01"><br>

    <label for="rewards-transportation">Rewards Rate for Transportation (%): </label>
    <input type="number" id="rewards-transportation" min="0" step="0.01"><br>

    <label for="rewards-misc">Rewards Rate for Miscellaneous (%): </label>
    <input type="number" id="rewards-misc" min="0" step="0.01"><br>

    <label for="monthly-fee">Monthly Fee: </label>
    <input type="number" id="monthly-fee" min="0" step="0.01"><br>

    <button type="button" id="add-card-button">Add Credit Card</button>
  </form>

  <h3>Credit Cards Added:</h3>
  <ul id="card-list">
  </ul>

  <button type="button" id="calculate-button">Calculate Profitability</button>

  <h2>Sorted Credit Cards Based on Profitability:</h2>
  <ul id="sorted-card-list">
  </ul>

  <script>
    class CreditCard {
        constructor(name, rewardsDining, rewardsGrocery, rewardsTransportation, rewardsMisc, monthlyFee) {
            this.name = name;
            this.rewardsDining = rewardsDining;
            this.rewardsGrocery = rewardsGrocery;
            this.rewardsTransportation = rewardsTransportation;
            this.rewardsMisc = rewardsMisc;
            this.monthlyFee = monthlyFee;
        }

        calculateProfitability(monthlySpendingDining, monthlySpendingGrocery, monthlySpendingTransportation, monthlySpendingMisc) {
            const totalRewards = (this.rewardsDining * monthlySpendingDining / 100) +
                                 (this.rewardsGrocery * monthlySpendingGrocery / 100) +
                                 (this.rewardsTransportation * monthlySpendingTransportation / 100) +
                                 (this.rewardsMisc * monthlySpendingMisc / 100);

            const monthlyProfit = totalRewards - this.monthlyFee;
            return monthlyProfit;
        }
    }

    const cards = [];

    document.getElementById('add-card-button').addEventListener('click', addCard);

    function addCard() {
        const cardName = document.getElementById('card-name').value;
        const rewardsDining = parseFloat(document.getElementById('rewards-dining').value) || 0;
        const rewardsGrocery = parseFloat(document.getElementById('rewards-grocery').value) || 0;
        const rewardsTransportation = parseFloat(document.getElementById('rewards-transportation').value) || 0;
        const rewardsMisc = parseFloat(document.getElementById('rewards-misc').value) || 0;
        const monthlyFee = parseFloat(document.getElementById('monthly-fee').value) || 0;

        if (cardName === "") {
            alert("Please enter the card name.");
            return;
        }

        const card = new CreditCard(cardName, rewardsDining, rewardsGrocery, rewardsTransportation, rewardsMisc, monthlyFee);

        cards.push(card);

        document.getElementById('card-form').reset();

        updateCardList();
    }

    function updateCardList() {
        const cardList = document.getElementById('card-list');
        cardList.innerHTML = '';

        cards.forEach((card, index) => {
            const li = document.createElement('li');
            li.textContent = `${card.name}`;
            cardList.appendChild(li);
        });
    }

    document.getElementById('calculate-button').addEventListener('click', calculateProfitability);

    function calculateProfitability() {
        const monthlySpendingDining = parseFloat(document.getElementById('dining-spending').value) || 0;
        const monthlySpendingGrocery = parseFloat(document.getElementById('grocery-spending').value) || 0;
        const monthlySpendingTransportation = parseFloat(document.getElementById('transportation-spending').value) || 0;
        const monthlySpendingMisc = parseFloat(document.getElementById('misc-spending').value) || 0;

        insertionSort(cards, monthlySpendingDining, monthlySpendingGrocery, monthlySpendingTransportation, monthlySpendingMisc);

        updateSortedCardList(monthlySpendingDining, monthlySpendingGrocery, monthlySpendingTransportation, monthlySpendingMisc);
    }

    function insertionSort(cards, monthlySpendingDining, monthlySpendingGrocery, monthlySpendingTransportation, monthlySpendingMisc) {
        for (let i = 1; i < cards.length; i++) {
            let currentCard = cards[i];
            let currentProfit = currentCard.calculateProfitability(monthlySpendingDining, monthlySpendingGrocery, monthlySpendingTransportation, monthlySpendingMisc);

            let j = i - 1;
            while (j >= 0 && cards[j].calculateProfitability(monthlySpendingDining, monthlySpendingGrocery, monthlySpendingTransportation, monthlySpendingMisc) < currentProfit) {
                cards[j + 1] = cards[j];
                j -= 1;
            }

            cards[j + 1] = currentCard;
        }
    }

    function updateSortedCardList(monthlySpendingDining, monthlySpendingGrocery, monthlySpendingTransportation, monthlySpendingMisc) {
        const sortedCardList = document.getElementById('sorted-card-list');
        sortedCardList.innerHTML = '';

        cards.forEach(card => {
            const profit = card.calculateProfitability(monthlySpendingDining, monthlySpendingGrocery, monthlySpendingTransportation, monthlySpendingMisc);
            const li = document.createElement('li');
            li.textContent = `${card.name}: $${profit.toFixed(2)}`;
            sortedCardList.appendChild(li);
        });
    }
  </script>
</body>
</html>
